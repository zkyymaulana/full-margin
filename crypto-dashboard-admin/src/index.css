@import "tailwindcss";

/* =========================
   Base Styles - Clean & Minimal
   ========================= */
@layer base {
  body {
    @apply bg-gray-50 text-gray-900;
  }

  body.dark-mode {
    @apply bg-gray-900 text-gray-100;
  }

  html,
  body {
    height: 100%;
    overflow-x: hidden;
  }
}

/* =========================
   Components Layer
   ========================= */
@layer components {
  /* Card Components - Shadow Only, No Border */
  .card {
    @apply bg-white;
    border-radius: 0.75rem;
    box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
    overflow: hidden;
    position: relative;
  }

  .dark-mode .card {
    @apply bg-gray-800;
    box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.3), 0 2px 4px -2px rgb(0 0 0 / 0.3);
  }

  .card-body {
    padding: 1.5rem;
    overflow: hidden;
    word-wrap: break-word;
  }

  /* Sidebar */
  .sidebar-link {
    padding: 0 0.75rem;
    transition: all 0.2s;
  }

  .sidebar-link:hover,
  .sidebar-item .sidebar-link.active {
    @apply bg-blue-50 text-blue-600;
  }

  .dark-mode .sidebar-link:hover,
  .dark-mode .sidebar-item .sidebar-link.active {
    @apply bg-blue-900/20 text-blue-400;
  }

  .left-sidebar {
    @apply bg-white;
    box-shadow: 1px 0 3px 0 rgb(0 0 0 / 0.05);
  }

  .dark-mode .left-sidebar {
    @apply bg-gray-800;
    box-shadow: 1px 0 3px 0 rgb(0 0 0 / 0.3);
  }

  /* Layout */
  .bg-surface {
    @apply bg-gray-50;
  }

  .dark-mode .bg-surface {
    @apply bg-gray-900;
  }

  /* Typography */
  .text-heading {
    @apply text-gray-900;
  }

  .dark-mode .text-heading {
    @apply text-white;
  }

  /* Chart Container Styling untuk Sinkronisasi yang Sempurna */
  .chart-container {
    @apply w-full;
    position: relative;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  .chart-container canvas {
    display: block;
    margin: 0 auto;
    box-sizing: border-box;
  }

  /* Pastikan semua chart memiliki lebar yang sama */
  .chart-sync-wrapper {
    @apply w-full;
    position: relative;
    overflow: hidden;
    box-sizing: border-box;
  }

  /* Styling khusus untuk main chart container */
  .main-chart-container {
    @apply w-full;
    min-height: 500px;
    position: relative;
    margin: 0;
    padding: 0;
  }

  /* Styling khusus untuk indicator chart containers */
  .indicator-chart-container {
    @apply w-full;
    min-height: 150px;
    position: relative;
    margin: 0;
    padding: 0;
    border-top: 1px solid;
    @apply border-gray-200;
  }

  .dark-mode .indicator-chart-container {
    @apply border-gray-700;
  }

  /* Pastikan tidak ada margin/padding yang mengganggu alignment */
  .chart-wrapper {
    @apply w-full;
    position: relative;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  .chart-wrapper > div {
    @apply w-full;
    margin: 0;
    padding: 0;
  }

  /* Styling untuk chart labels */
  .chart-label {
    @apply text-sm font-semibold mb-2;
    margin: 0;
    padding: 8px 0 4px 0;
  }

  .chart-label.first {
    padding-top: 0;
  }

  /* Responsive chart styling */
  @media (max-width: 768px) {
    .main-chart-container {
      min-height: 400px;
    }

    .indicator-chart-container {
      min-height: 120px;
    }
  }

  /* Grid system untuk chart layout yang konsisten */
  .charts-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 0;
    width: 100%;
    box-sizing: border-box;
  }

  .charts-grid > * {
    width: 100%;
    box-sizing: border-box;
  }

  /* Ensure all charts have the same horizontal margins */
  .chart-sync-container {
    @apply w-full;
    position: relative;
    box-sizing: border-box;
    margin-left: 0;
    margin-right: 0;
    padding-left: 0;
    padding-right: 0;
  }

  /* Responsive chart styling dengan padding yang tepat untuk price labels */
  @media (max-width: 768px) {
    .main-chart-container {
      min-height: 400px;
      padding-right: 16px; /* Extra padding untuk mobile agar price labels tidak terpotong */
    }

    .indicator-chart-container {
      min-height: 120px;
      padding-right: 16px;
    }

    /* Mobile-specific chart container adjustments */
    .chart-sync-container {
      padding-right: 16px;
      margin-right: -16px; /* Negative margin untuk mengkompensasi padding */
    }
  }

  @media (min-width: 769px) and (max-width: 1024px) {
    .main-chart-container {
      min-height: 450px;
      padding-right: 12px; /* Medium padding untuk tablet */
    }

    .indicator-chart-container {
      min-height: 130px;
      padding-right: 12px;
    }

    .chart-sync-container {
      padding-right: 12px;
      margin-right: -12px;
    }
  }

  @media (min-width: 1025px) {
    .main-chart-container {
      min-height: 500px;
      padding-right: 8px; /* Minimal padding untuk desktop */
    }

    .indicator-chart-container {
      min-height: 150px;
      padding-right: 8px;
    }

    .chart-sync-container {
      padding-right: 8px;
      margin-right: -8px;
    }
  }

  /* Pastikan chart canvas tidak overflow */
  .chart-container canvas,
  .main-chart-container canvas,
  .indicator-chart-container canvas {
    max-width: 100%;
    box-sizing: border-box;
  }

  /* Price scale responsive adjustments */
  @media (max-width: 480px) {
    .chart-sync-container {
      padding-right: 20px; /* Extra padding untuk very small screens */
      margin-right: -20px;
    }
  }
}

/* =========================
   Utilities Layer
   ========================= */
@layer utilities {
  /* Sidebar Scroll */
  .scroll-sidebar {
    overflow-y: auto;
    scrollbar-width: thin;
    scrollbar-color: rgb(229 231 235) transparent;
  }

  .dark-mode .scroll-sidebar {
    scrollbar-color: rgb(75 85 99) transparent;
  }

  .scroll-sidebar::-webkit-scrollbar {
    width: 4px;
  }

  .scroll-sidebar::-webkit-scrollbar-thumb {
    @apply bg-gray-300;
    border-radius: 2px;
  }

  .dark-mode .scroll-sidebar::-webkit-scrollbar-thumb {
    @apply bg-gray-600;
  }

  .scroll-sidebar::-webkit-scrollbar-thumb:hover {
    @apply bg-gray-400;
  }

  .dark-mode .scroll-sidebar::-webkit-scrollbar-thumb:hover {
    @apply bg-gray-500;
  }

  /* Smooth transition untuk chart sync */
  .chart-sync-transition {
    transition: all 0.1s ease-out;
  }

  /* Prevent chart flickering during sync */
  .chart-syncing {
    pointer-events: none;
  }

  .chart-syncing canvas {
    transition: opacity 0.05s ease-out;
  }
}

/* =========================
   Z-Index Variables
   ========================= */
:root {
  --z-sidebar: 9999;
  --z-overlay: 9998;
  --z-header: 100;
  --z-topstrip: 90;
  --z-content: 1;
}

/* =========================
   Layout Positioning
   ========================= */

/* Header */
header {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: var(--z-header);
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.08);
}

.dark-mode header {
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.3);
}

/* Sidebar */
#application-sidebar-brand {
  z-index: var(--z-sidebar);
  position: fixed;
  overflow-y: auto;
  overflow-x: hidden;
  transition: transform 0.3s ease-in-out;
}

@media (min-width: 1280px) {
  #application-sidebar-brand {
    position: sticky;
    z-index: auto;
    top: 70px;
    transform: translateX(0) !important;
  }
}

/* Sidebar Overlay */
#sidebar-overlay {
  z-index: var(--z-overlay);
  position: fixed;
  transition: opacity 0.3s ease-in-out;
}

#sidebar-overlay.hidden {
  opacity: 0;
  pointer-events: none;
}

#sidebar-overlay:not(.hidden) {
  opacity: 1;
  pointer-events: auto;
}

/* Page Content */
#content {
  z-index: var(--z-content);
  position: relative;
}

/* Body Scroll Control */
body.sidebar-open {
  overflow: hidden;
}

@media (min-width: 1280px) {
  body.sidebar-open {
    overflow: auto;
  }
}

/* =========================
   Scrollbar Styling
   ========================= */
#application-sidebar-brand::-webkit-scrollbar {
  width: 6px;
}

#application-sidebar-brand::-webkit-scrollbar-track {
  @apply bg-gray-100;
  border-radius: 10px;
}

.dark-mode #application-sidebar-brand::-webkit-scrollbar-track {
  @apply bg-gray-800;
}

#application-sidebar-brand::-webkit-scrollbar-thumb {
  @apply bg-gray-400;
  border-radius: 10px;
}

.dark-mode #application-sidebar-brand::-webkit-scrollbar-thumb {
  @apply bg-gray-600;
}

#application-sidebar-brand::-webkit-scrollbar-thumb:hover {
  @apply bg-gray-500;
}

#application-sidebar-brand {
  scrollbar-width: thin;
}

/* =========================
   Modal Animations
   ========================= */
#logout-modal {
  transition: opacity 0.3s ease-in-out;
}

#logout-modal.animate-in {
  opacity: 1;
}

#logout-modal.animate-in .bg-white {
  transform: scale(1);
  transition: transform 0.3s ease-out;
}

#logout-modal .bg-white {
  transform: scale(0.95);
  transition: transform 0.3s ease-out;
}

#logout-modal.animate-out {
  opacity: 0;
  transition: opacity 0.2s ease-in-out;
}

#logout-modal.animate-out .bg-white {
  transform: scale(0.95);
}

/* =========================
   Third-party Overrides
   ========================= */

/* SweetAlert2 */
.swal-high-z-index,
.swal2-container {
  z-index: 10000 !important;
}

.swal2-backdrop-show {
  z-index: 9999 !important;
}
